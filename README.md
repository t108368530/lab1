# 實驗報告(語音者識別)

- [實驗報告](#實驗報告語音者識別) 
  - [說明](#說明)
  - [腳本示意圖](#腳本示意圖)
  - [結果](#結果)
  - [心得觀察討論](#心得觀察討論)
  - [其他變聲方法](#其他變聲方法)

---

### 說明

1. 實驗主題
   - 語音者識別
2. 實驗資料
   - 來源：教授所給的資料集(學長所錄音的)
   - 語者數量：10個
   - 檔案數量：400筆(每個語者40筆資料)
3. 實驗環境(是使用Anaconda)
   - OS:Ubunut20.04
   - Language:Python(Version 3.8.1)
   - IDE:JupyterLab
4. 簡易步驟
   - 分切資料 -> 特徵取樣 -> 創建模型 -> 訓練模型 -> 測試模型

- 資料集組成
  - 訓練資料 = 訓練資料夾內音檔(沒調音)+訓練資料夾內音檔(調音方法(Librosa(pitch_shift) or TD-Psola)
  - 驗證資料 = 驗證資料夾內音檔(沒調音)
  - 測試資料 = 調音資料夾內音檔(調音方法(Librosa(pitch_shift) or TD-Psola,此資料不包含在訓練資料裡面)

---

### 腳本示意圖

1. 資料切割
   ![](https://i.imgur.com/HJupvJr.png)
   
2. 特徵取樣
   ![](https://i.imgur.com/8bgkPSV.png)
   
3. [Github(整個實驗放置處)](https://github.com/t108368530/lab1)

---

### 結果
- 表一. 訓練資料使用librosa 的 pitch_shift 提高1-7個音階做資料增廣，驗證資料(無調音),測試資料(固定調音高8)，優化器(Stochastic Gradient Descent; SGD)

|  Model  |         訓練參數          | 驗證資料(Valid)正確率 | 測試資料(Test)正確率 |
|:-------:|:-------------------------:|:-----------------:|:----------------:|
| **MLP** | epochs=200,batch_size=128 |        85%        |       91%        |
| **CNN** | epochs=25,batch_size=128  |        70%        |       91%        |


- 表二. 訓練資料使用TD-Psola調音，調整比率為 $2^{(\frac{i}{12})}，i為1到12$，驗證資料(無調音),測試資料(固定調音比率為$2^{(\frac{i}{12})} ,i為12$)，優化器SGD

|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        95%        |       95%        |   0.1378   |
| **CNN** | epochs=25,batch_size=128  |        95%        |       95%        |   0.1006   |

- 表三. 訓練資料使用TD-Psola調音，調整比率為 $2^{(\frac{i}{12})}，i為1到12$，驗證資料(無調音),測試資料(固定調音比率為$2^{(\frac{i}{12})} ,i為16$)，優化器(Adaptive Moment Estimation; Adam)

|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        95%        |       74%        |   0.833    |
| **CNN** | epochs=25,batch_size=128  |        98%        |       77%        |   1.2630   |

:::info
以下表格的實驗，測試資料是經過Morphvox Pro軟體變聲的，表四至六分別是使用該軟體套至不同的變聲配置檔案作為測試資料來源，所做出的結果。
Morphvox Pro是google就會直接找到的常用變聲軟體
:::

- 表四. 訓練資料使用TD-Psola調音，調整比率為 $2^{(\frac{i}{12})}，i為1到12$，驗證資料(無調音),測試資料(使用Morphvox Pro做調音-配置檔案1)，優化器(Adaptive Moment Estimation; Adam)

|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        95%        |       47%        |   2.0956  |
| **CNN** | epochs=25,batch_size=128  |        95%        |       54%        |   2.2901   |

- 表五. 訓練資料使用TD-Psola調音，調整比率為 $2^{(\frac{i}{12})}，i為1到12$，驗證資料(無調音),測試資料(使用Morphvox Pro做調音-配置檔案2)，優化器(Adaptive Moment Estimation; Adam)

|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        93%        |       52%        |   1.7243    |
| **CNN** | epochs=25,batch_size=128  |        98%        |       48%        |   2.2583  |

- 表六. 訓練資料使用TD-Psola調音，調整比率為 $2^{(\frac{i}{12})}，i為1到12$，驗證資料(無調音),測試資料(使用Morphvox Pro做調音-配置檔案3)，優化器(Adaptive Moment Estimation; Adam)

|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        93%        |       41%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        98%        |       43%        |  2.6741   |


:::info
以下表格
訓練資料變音方式：Librosa
驗證資料變音方式：沒有進行變音
測試資料變音方式分別為：Librosa,Morphvox_Pro,TD-PSOLA
測試 Librosa 變音參數：3
測試 Morphvox_Pro 變音參數：4種該程式變音設定檔案
測試 TD-PSOLA 變音參數：固定調音比率為$2^{(\frac{i}{12})} ,i為18$
:::

- 表七. 測試資料變音方式經由Librosa變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        80%        |       87%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        73%        |       88%        |  2.6741   |

- 表八. 測試資料變音方式經由Morphvox_Pro變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        80%        |       26%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        73%        |       20%        |  2.6741   |

- 表九. 測試資料變音方式經由TD-PSOLA變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        80%        |       49%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        73%        |       50%        |  2.6741   |

:::info
以下表格
訓練資料變音方式：Morphvox_Pro
驗證資料變音方式：沒有進行變音
測試資料變音方式分別為：Librosa,Morphvox_Pro,TD-PSOLA
測試 Librosa 變音參數：3
測試 Morphvox_Pro 變音參數：4種該程式變音設定檔案
測試 TD-PSOLA 變音參數：固定調音比率為$2^{(\frac{i}{12})} ,i為18$
:::

- 表十. 測試資料變音方式經由Librosa變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        28%        |       30%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        30%        |       31%        |  2.6741   |

- 表十一. 測試資料變音方式經由Morphvox_Pro變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        24%        |       86%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        27%        |       88%        |  2.6741   |

- 表十二. 測試資料變音方式經由TD-PSOLA變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        24%        |       43%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        27%        |       48%        |  2.6741   |

:::info
以下表格
訓練資料變音方式：TD-PSOLA
驗證資料變音方式：沒有進行變音
測試資料變音方式分別為：Librosa,Morphvox_Pro,TD-PSOLA
測試 Librosa 變音參數：3
測試 Morphvox_Pro 變音參數：4種該程式變音設定檔案
測試 TD-PSOLA 變音參數：固定調音比率為$2^{(\frac{i}{12})} ,i為18$
:::

- 表十三. 測試資料變音方式經由Librosa變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        28%        |       30%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        30%        |       31%        |  2.6741   |

- 表十四. 測試資料變音方式經由Morphvox_Pro變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        94%        |       27%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        98%        |       25%        |  2.6741   |

- 表十五. 測試資料變音方式經由TD-PSOLA變音 


|  Model  |         訓練參數          | Valid Data 正確率 | Test Data 正確率 | Loss(Test) |
|:-------:|:-------------------------:|:-----------------:|:----------------:|:----------:|
| **MLP** | epochs=200,batch_size=128 |        94%        |       83%        |   2.8149    |
| **CNN** | epochs=25,batch_size=128  |        98%        |       84%        |  2.6741   |




---

### 心得,觀察,討論

- 心得
  - 剛開始在看學長的留下來的code，特徵提取方面是使用不同音訊特徵提取方法，再將特徵展平，然後將其餵入類神經網路內，再利用資料增廣(調整音訊的音調與音階)前，正確率大約只有70%左右，之後有明顯提升至91%。 
  - 數據增強使用TD-Psola方式調音，在[結果](#結果)TD-Psola方式調音顯示會比使用Librosa 的 Pitch_Shift 來做數據增強來的準




- 觀察 
  - 特徵提取時MFCC特徵，經過算數平均數的計算因此重要訊息被壓縮到了
  - 在此網絡最高的正確率就是91％，可能需要調整網絡架構
  - 提取太多特徵，提取速度較慢
  - 從[結果](#結果)表四到六，發現準確率有明顯下降 **(更新於 2020/08/09)**

- 討論
  - 小波轉換取特徵可能會更好，因為低通濾波器，可以將輸入訊號的高頻部份濾掉而輸出低頻部份,高通濾波器，可以將輸入訊號的低頻部份濾掉而輸出高頻部份。
  - 如果優化Loss Function,使整個網絡再調整全中有所差異
  - 我有在做一個小實驗使用TD-Psola方式對測試資料集調音，調整比率為 $2^{(\frac{i}{1６})}，i為16$，此時的測試資料調音範圍是超出訓練資料集的調音範圍，從[結果](#結果)中的表三可看出正確率有明顯下降
  - 從[結果](#結果)中的表三到六，可以發現只要超過訓練資料及的範圍，模型的準確率，會有明顯的下降，我要嘗試把提取特徵的方法做更改，還有模型也做更改，特徵提取改用mel spectrogra或MFCC， 模型改用２維卷積與 **(更新於 2020/08/09)**
 
  
  
  
